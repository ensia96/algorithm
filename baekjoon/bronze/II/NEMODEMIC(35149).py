w, *x, a, v, s, e = map(open(0).read().count, "#UDLRAVSE")
print([-1, [[2 - (w < 2 > sum(x)), 3][v > 0], 4][a > 0]][s == 1 == e])
